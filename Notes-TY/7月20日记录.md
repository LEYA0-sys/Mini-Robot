# 7月20日记录

2.2.4 设置环境变量(每次启动新窗口都要)

因为使用esp-idf的工具，所以要设置环境变量，不然会提示没有idf.py的指令，也可以设置永久的环境变量，这里不建议这么去做，因为会影响到其他软件的使用，如果要设置永久，可以参考官方文档中的步骤

但解决这个问题，可以在VSCode中使用工具，在下一次文章中，我会讲

```
. $HOME/esp32/esp-idf/export.sh
```





MCP接入点的地址是动态的，如果服务器一断线，重启后就需要重新配置接入点，这是个非常麻烦的地方，有没有可能自动刷新新的接入点呢？我想到了用固定域名解析到新接入点，这样每次重启后都可以以固定域名为接入点，但固定域名解析到动态接入点这个问题仍然需要解决。

2025-06-17 15:24





**MCP接入点的地址是动态的，如果服务器一断线，重启后就需要重新配置接入点，这是个非常麻烦的地方，有没有可能自动刷新新的接入点呢？我想到了用固定域名解析到新接入点，这样每次重启后都可以以固定域名为接入点，但固定域名解析到动态接入点这个问题仍然需要解决。**

 

```python
(async function main() { 
    const resp = await fetch( "https://xiaozhi.me/api/agents/<你自己的agent Id>/generate-mcp-endpoint-token", { headers: { authorization: "Bearer <你自己的Auth 可以从 xiaozhi.me获取>", "content-type": "application/json", }, body: null, method: "POST", } ); const res = await resp.json(); console.log('我的Token是', res.token); })();
```







